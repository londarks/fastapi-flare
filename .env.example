# ── Storage backend ──────────────────────────────────────────────────────────
# "sqlite"      (default) — zero-config local file, no external dependencies.
# "postgresql"            — production-grade, requires a running PostgreSQL instance.
#
FLARE_STORAGE_BACKEND=sqlite

# ── SQLite (storage_backend=sqlite) ──────────────────────────────────────────
# FLARE_SQLITE_PATH=flare.db

# ── PostgreSQL (storage_backend=postgresql) ───────────────────────────────────
# Connection string. Special characters in passwords must be percent-encoded:
#   @  →  %40     #  →  %23     &  →  %26
# Example: password@123  →  postgresql://user:password%40123@host:5432/mydb
#
# FLARE_PG_DSN=postgresql://user:password@localhost:5432/mydb
#
# Table name — change per project to isolate logs in the same database:
# FLARE_PG_TABLE_NAME=flare_logs_checkout
# FLARE_PG_TABLE_NAME=flare_logs_auth
FLARE_PG_TABLE_NAME=flare_logs

# ── Dashboard ─────────────────────────────────────────────────────────────────
FLARE_DASHBOARD_PATH=/flare
FLARE_DASHBOARD_TITLE=Flare — Error Logs

# ── Retention ─────────────────────────────────────────────────────────────────
FLARE_MAX_ENTRIES=10000
FLARE_RETENTION_HOURS=168

# ── Worker ────────────────────────────────────────────────────────────────────
FLARE_WORKER_INTERVAL_SECONDS=5
FLARE_WORKER_BATCH_SIZE=100

# ── Example app only (examples/example.py) ────────────────────────────────────
EXAMPLE_ADMIN_TOKEN=troque-isso-antes-de-usar

# ── Zitadel OAuth2 (optional) ─────────────────────────────────────────────────
# Bearer mode (API clients):
#   Set the three fields below. /flare will require:
#     Authorization: Bearer <token>
#
# Browser PKCE mode (browser access):
#   Also set FLARE_ZITADEL_REDIRECT_URI.
#   Opening /flare in a browser redirects to Zitadel, user logs in and returns
#   authenticated — no manual token copying needed.
#
# FLARE_ZITADEL_DOMAIN=auth.mycompany.com
# FLARE_ZITADEL_CLIENT_ID=<your-client-id>
# FLARE_ZITADEL_PROJECT_ID=<your-project-id>
#
# Register this as the Redirect URI in Zitadel (browser mode only):
# FLARE_ZITADEL_REDIRECT_URI=http://localhost:8001/flare/callback
# FLARE_ZITADEL_REDIRECT_URI=https://myapp.com/flare/callback
#
# Session signing key (required for browser mode):
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
# FLARE_ZITADEL_SESSION_SECRET=<32-byte-hex-string>
#
# Optional — accept tokens from a legacy/migrated project as well:
# FLARE_ZITADEL_OLD_CLIENT_ID=<old-client-id>
# FLARE_ZITADEL_OLD_PROJECT_ID=<old-project-id>

FLARE_REDIS_PORT=6379
FLARE_REDIS_PASSWORD=
FLARE_REDIS_DB=0

# Option B: URL completa (tem prioridade quando definida)
# Atenção: caracteres especiais na senha precisam ser percent-encoded
# FLARE_REDIS_URL=redis://:minha_senha@host:6379/0
# ── Storage backend ──────────────────────────────────────────────────────────────────
# "redis"  (default) — Redis Streams. Requires a running Redis instance.
# "sqlite"           — Local SQLite file. Requires: pip install 'fastapi-flare[sqlite]'
#
FLARE_STORAGE_BACKEND=redis
# FLARE_SQLITE_PATH=flare.db
# ── Dashboard ────────────────────────────────────────────────────────────────
FLARE_DASHBOARD_PATH=/flare
FLARE_DASHBOARD_TITLE=Flare — Error Logs

# ── Storage ──────────────────────────────────────────────────────────────────
FLARE_MAX_ENTRIES=10000
FLARE_RETENTION_HOURS=168

# ── Worker ───────────────────────────────────────────────────────────────────
FLARE_WORKER_INTERVAL_SECONDS=5
FLARE_WORKER_BATCH_SIZE=100

# ── Example app only (examples/example.py) ───────────────────────────────────
# Token for the /admin route in the example app. Change this before running.
EXAMPLE_ADMIN_TOKEN=troque-isso-antes-de-usar
# ── Zitadel OAuth2 (optional) ───────────────────────────────────────────────
# Modo Bearer (API clients):
#   Defina os três campos abaixo. O /flare exigirá:
#     Authorization: Bearer <token>
#
# Modo Browser PKCE (acesso pelo browser):
#   Adicione também FLARE_ZITADEL_REDIRECT_URI.
#   Ao abrir /flare no browser, o usuário é redirecionado para o Zitadel,
#   faz login e volta autenticado — sem precisar copiar token manualmente.
#
# Requires: pip install "fastapi-flare[auth]"
#
# FLARE_ZITADEL_DOMAIN=auth.mycompany.com
# FLARE_ZITADEL_CLIENT_ID=<your-client-id>
# FLARE_ZITADEL_PROJECT_ID=<your-project-id>
#
# Modo browser — registre esta URI como Redirect URI no Zitadel:
# FLARE_ZITADEL_REDIRECT_URI=http://localhost:8001/auth/callback
#
# Produção (troque pelo domínio real):
# FLARE_ZITADEL_REDIRECT_URI=https://myapp.com/auth/callback
#
# Chave para assinar o cookie de sessão (obrigatória no modo browser):
# Gere com: python -c "import secrets; print(secrets.token_hex(32))"
# FLARE_ZITADEL_SESSION_SECRET=<hex-string-de-32-bytes>
#
# Optional — accept tokens from a legacy/migrated project as well:
# FLARE_ZITADEL_OLD_CLIENT_ID=<old-client-id>
# FLARE_ZITADEL_OLD_PROJECT_ID=<old-project-id>
